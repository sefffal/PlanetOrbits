<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · PlanetOrbits.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="PlanetOrbits.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">PlanetOrbits.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li><a class="tocitem" href="#Performance"><span>Performance</span></a></li><li><a class="tocitem" href="#Convenience"><span>Convenience</span></a></li><li><a class="tocitem" href="#Host-calculations"><span>Host calculations</span></a></li></ul></li><li><a class="tocitem" href="../plots/">Plotting</a></li><li><a class="tocitem" href="../image-warping/">Image Warping</a></li></ul></li><li><span class="tocitem">Documentation</span><ul><li><a class="tocitem" href="../api/">API</a></li><li><a class="tocitem" href="../conventions/">Conventions</a></li><li><a class="tocitem" href="../kepler/">Kepler Solvers</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sefffal/PlanetOrbits.jl/blob/master/docs/src/introduction.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h1><p>This package is structured around a representation of an orbit (<a href="../api/#PlanetOrbits.AbstractOrbit"><code>PlanetOrbits.AbstractOrbit</code></a>, and a representation of a &quot;solved&quot; orbit (<a href="../api/#PlanetOrbits.AbstractOrbitSolution"><code>PlanetOrbits.AbstractOrbitSolution</code></a>).</p><p>You start by creating an orbit with known information, e.g. the semi-major axis and eccentricity. You can then query information from this orbit, like its orbital period, mean motion, or periastron (closest approach). Then, you can &quot;solve&quot; the orbit one more times for a given time, eccentric anomaly, or true anomaly.</p><p>Let&#39;s see how this works.</p><pre><code class="language-julia hljs">using PlanetOrbits, Plots
orb = orbit(
    a=1.0, # semi major axis (AU)
    M=1.0, # primary mass (solar masses)
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">RadialVelocityOrbit{Float64}
─────────────────────────
a   [au ] = 1.0
e         = 0.0
ω   [°  ] = 0.0
τ         = 0.0
M   [M⊙ ] = 1.0 
──────────────────────────
period        [yrs ] : 1.0 
mean motion   [°/yr] : 360.0 
semiamplitude₂ [m/s] : 29785.9 
──────────────────────────
</code></pre><p>The <a href="../api/#PlanetOrbits.orbit-Tuple{}"><code>orbit</code></a> function accepts many combinations of orbital parameters and returns a subtype of <a href="../api/#PlanetOrbits.AbstractOrbit"><code>PlanetOrbits.AbstractOrbit</code></a>.</p><p>We can now query some basic properties about the orbit:</p><pre><code class="language-julia hljs">period(orb) # orbital period (days)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">365.2422</code></pre><pre><code class="language-julia hljs">meanmotion(orb) # Mean motion (radians/yr)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">6.283185307179586</code></pre><pre><code class="language-julia hljs">periastron(orb) # Epoch of periastron passage (MJD)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">58849.0</code></pre><pre><code class="language-julia hljs">semiamplitude(orb) # radial velocity semi-amplitude (m/s)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">29785.890525825977</code></pre><p>We can plot the orbit (more on this in <a href="../plots/#Plotting">Plotting</a>):</p><pre><code class="language- hljs">plot(orb)</code></pre><p>And we can solve the orbit for a given orbital location</p><pre><code class="language- hljs">sol = orbitsolve_ν(orb, 0.1)        # true anomaly (radians)
sol = orbitsolve_eccanom(orb, 0.1)  # eccentric anomaly (radians)
sol = orbitsolve_meananom(orb, 0.1) # mean anomaly (radians)</code></pre><p>When constructing an orbit, the location of the planet along its orbit can be specified by <code>τ</code>. This is a unitless value between 0 and 1 that represents the fraction of the orbit completed at reference epoch <code>tref</code> which by default is the MJD <code>58849.0</code>, or 2020-01-01.</p><pre><code class="language-julia hljs">orb = orbit(
    a=1.0, # semi major axis (AU)
    M=1.0, # primary mass (solar masses)
    τ=0.2,
);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">RadialVelocityOrbit{Float64}
─────────────────────────
a   [au ] = 1.0
e         = 0.0
ω   [°  ] = 0.0
τ         = 0.2
M   [M⊙ ] = 1.0 
──────────────────────────
period        [yrs ] : 1.0 
mean motion   [°/yr] : 360.0 
semiamplitude₂ [m/s] : 29785.9 
──────────────────────────
</code></pre><p>We can now meaningfully solve the location of the planet at a specific time:</p><pre><code class="language-julia hljs">t = mjd(&quot;2020-07-15&quot;) # date as in modified julian days.
sol = orbitsolve(orb, t) # can optionally pass `tref=...`</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">OrbitSolutionRadialVelocity{Float64, RadialVelocityOrbit{Float64}}(RadialVelocityOrbit{Float64}(1.0, 0.0, 0.0, 0.2, 1.0, 365.2422, 6.283185307179586, 1.0, 0.0, 29785.890525825977), 2.1151100154549987, 2.1151100154549987, -0.5178310849003872, 59045.0)</code></pre><p>We can query specifics at this solution:</p><pre><code class="language-julia hljs">trueanom(sol) # true anomaly (radians)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">2.1151100154549987</code></pre><pre><code class="language-julia hljs">eccanom(sol) # eccentric anomaly (radians)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">2.1151100154549987</code></pre><pre><code class="language- hljs">plot(sol) # defaults to kind=:radvel for RadialVelocityOrbit</code></pre><p>Notice that we now see a marker at the location found by <a href="../api/#PlanetOrbits.orbitsolve"><code>orbitsolve</code></a>.</p><p>We can create an orbit with some eccentricity. If not specified, eccentricity and the argument or periapsis default to 0 for any orbit type.</p><pre><code class="language- hljs">orb = orbit(
    a=1.0, # semi major axis (AU)
    M=1.0, # primary mass (solar masses)
    τ=0.2,
    # New:
    e=0.6, # eccentricity
    ω=2.5, # argument of periapsis (radians)
)
plot(orb) # defaults to kind=:radvel for RadialVelocityOrbit</code></pre><div class="admonition is-warning"><header class="admonition-header">ω convention</header><div class="admonition-body"><p>The convention used in this package is that ω, the argument of periapsis, refers to the <strong>secondary</strong> body. This is in contrast to the typical standard adopted in the radial velocity literature where ω refers to the primary. You can convert by adding or subtracting 180°.</p></div></div><p>Since we only provided very minimal information to the <code>orbit</code> function, we&#39;ve been receiving a <a href="../api/#PlanetOrbits.RadialVelocityOrbit"><code>RadialVelocityOrbit</code></a>. This object contains sufficient information to calculate the above radial velocity plots, orbital period, etc., but not the 3D position in space.</p><p>Let&#39;s create a new orbit with a specified inclination and longitude of ascending node.</p><pre><code class="language-julia hljs">orb = orbit(
    a=1.0, # semi major axis (AU)
    M=1.0, # primary mass (solar masses)
    τ=0.2,
    e=0.6, # eccentricity
    ω=2.5, # argument of periapsis (radians)
    # New:
    i=0.6, # inclination (radians)
    Ω=2.3, # inclination (radians)
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">KepOrbit{Float64}
─────────────────────────
a   [au ] = 1.0
e         = 0.6
i   [°  ] = 34.4
ω   [°  ] = 143.0
Ω   [°  ] = 132.0
τ         = 0.2
M   [M⊙ ] = 1.0 
──────────────────────────
period      [yrs ] : 1.0 
mean motion [°/yr] : 360.0 
──────────────────────────
</code></pre><p>This time we received a full <a href="../api/#PlanetOrbits.KepOrbit"><code>KepOrbit</code></a>. This has the necessary information to solve the orbit in 2/3D.</p><pre><code class="language- hljs">plot(orb) # defaults to kind=(:x,:y) for KepOrbit</code></pre><pre><code class="language- hljs">plot(orb, kind=(:x,:y,:z))</code></pre><div class="admonition is-warning"><header class="admonition-header">Cartesian convention</header><div class="admonition-body"><p>The convention used in this package is that x increases to the left (just like right-ascension), and the z increases away from the observer. This means all results are ready to be compared to observations where these conventions are typically used; however, it does mean that the space does not follow the standard right-hand rule.</p></div></div><p>We can solve for a time or location as usual.</p><pre><code class="language-julia hljs">sol = orbitsolve(orb, mjd(&quot;2025-01&quot;))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">OrbitSolutionKep{Float64, KepOrbit{Float64}}(KepOrbit(1.0, 0.6, 0.6, 2.5, 2.3, 0.2, 1.0), -2.402898315438049, -1.823941726564961, 0.09694916543950415, 0.9952893344754498, -0.4436089926163764, 1.1502702083729568, 60676.0)</code></pre><pre><code class="language-julia hljs">eccanom(sol) # eccentric anomaly (radians)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">-1.823941726564961</code></pre><p>We can also query the cartesian position of the planet in AU:</p><pre><code class="language-julia hljs">PlanetOrbits.posx(sol)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.7923981058899824</code></pre><pre><code class="language-julia hljs">PlanetOrbits.posy(sol)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">-0.8314215952320527</code></pre><pre><code class="language-julia hljs">PlanetOrbits.posy(sol)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">-0.8314215952320527</code></pre><pre><code class="language- hljs">plot(sol)</code></pre><pre><code class="language- hljs">plot(sol, kind=:x)</code></pre><p>We can still of course calculate the radial velocity as well.</p><pre><code class="language-julia hljs">radvel(sol)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">10818.488767445728</code></pre><pre><code class="language- hljs">plot(sol, kind=:radvel)</code></pre><p>Finally, we&#39;ll specify the parallax distance to the system. This will allow us to plot orbits with angular units as they would appear in the sky from the Earth.</p><pre><code class="language-julia hljs">orb = orbit(
    a=1.0, # semi major axis (AU)
    M=1.0, # primary mass (solar masses)
    τ=0.2,
    e=0.6, # eccentricity
    ω=2.5, # argument of periapsis (radians)
    i=0.6, # inclination (radians)
    Ω=2.3, # inclination (radians)
    # New:
    plx=100.0 # parallax distance (milliarcseconds)
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">VisualOrbit{Float64}
─────────────────────────
a   [au ] = 1.0
e         = 0.6
i   [°  ] = 34.4
ω   [°  ] = 143.0
Ω   [°  ] = 132.0
τ         = 0.2
M   [M⊙ ] = 1.0 
plx [mas] = 100.0 
──────────────────────────
period      [yrs ] : 1.0 
distance    [pc  ] : 10.0 
mean motion [°/yr] : 360.0 
──────────────────────────
</code></pre><pre><code class="language- hljs">sol = orbitsolve(orb, 0.0)
plot(sol)</code></pre><pre><code class="nohighlight hljs">posangle(sol) # position angle offset from barycentre (milliarcseconds)</code></pre><pre><code class="language-julia hljs">projectedseparation(sol) # separation from barycentre (milliarcseconds)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">143.5680289082937</code></pre><pre><code class="language-julia hljs">raoff(sol) # right ascension offset from barycentre (milliarcseconds)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">125.7543106934933</code></pre><pre><code class="language-julia hljs">decoff(sol) # declination offset from barycentre (milliarcseconds)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">-69.26494255117096</code></pre><pre><code class="language-julia hljs">raoff(sol) # right ascension offset from barycentre (milliarcseconds)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">125.7543106934933</code></pre><pre><code class="language-julia hljs">decoff(sol) # declination offset from barycentre (milliarcseconds)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">-69.26494255117096</code></pre><pre><code class="language-julia hljs">pmra(sol) # instantaneous right ascension velocity from barycentre (milliarcseconds/year)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">-261.77533787758915</code></pre><pre><code class="language-julia hljs">pmdec(sol) # instantaneous declination velocity from barycentre (milliarcseconds/year)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">-185.71163886586308</code></pre><pre><code class="language-julia hljs">accra(sol) # instantaneous right ascension acceleration from barycentre (milliarcseconds/year^2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">-1620.351401869363</code></pre><pre><code class="language-julia hljs">accdec(sol) # instantaneous declination acceleration from barycentre (milliarcseconds/year^2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">892.4827001496805</code></pre><h2 id="Performance"><a class="docs-heading-anchor" href="#Performance">Performance</a><a id="Performance-1"></a><a class="docs-heading-anchor-permalink" href="#Performance" title="Permalink"></a></h2><p>The <a href="../api/#PlanetOrbits.orbit-Tuple{}"><code>orbit</code></a> function is a convenience only for interactive use. It is inefficient since it is not type-stable. Instead, one should use one of the orbit constructors directly. For example, instead of </p><pre><code class="language-julia hljs">orb = orbit(
    a=1.0, # semi major axis (AU)
    M=1.0, # primary mass (solar masses)
    τ=0.2,
    e=0.6, # eccentricity
    ω=2.5, # argument of periapsis (radians)
    i=0.6, # inclination (radians)
    Ω=2.3, # inclination (radians)
    plx=100.0 # parallax distance (milliarcseconds)
) # Not type stable</code></pre><p>Use:</p><pre><code class="language-julia hljs">orb = VisualOrbit(
    a=1.0, # semi major axis (AU)
    M=1.0, # primary mass (solar masses)
    τ=0.2,
    e=0.6, # eccentricity
    ω=2.5, # argument of periapsis (radians)
    i=0.6, # inclination (radians)
    Ω=2.3, # inclination (radians)
    plx=100.0 # parallax distance (milliarcseconds)
) # Type stable</code></pre><p>This will also suppress the log message.</p><h2 id="Convenience"><a class="docs-heading-anchor" href="#Convenience">Convenience</a><a id="Convenience-1"></a><a class="docs-heading-anchor-permalink" href="#Convenience" title="Permalink"></a></h2><p>All functions described above that apply to orbit solutions can be called directly on an orbit along with a time in days:</p><pre><code class="language-julia hljs">orb = orbit(
    a=1.0, # semi major axis (AU)
    M=1.0, # primary mass (solar masses)
)
radvel(orb, mjd(&quot;2025-01-01&quot;))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">29783.14689439822</code></pre><p>If you need to calculate many different properties, e.g. both x and y position at a given time/location, it is more efficient to calculate the orbit solution a single time.</p><h2 id="Host-calculations"><a class="docs-heading-anchor" href="#Host-calculations">Host calculations</a><a id="Host-calculations-1"></a><a class="docs-heading-anchor-permalink" href="#Host-calculations" title="Permalink"></a></h2><p>The above calculations treat the planet as a test particle and calculate their displacement/velocity/etc. compared to the two-particle system&#39;s barycentre. If you wish to calculate the same properties for the host object, you can additionally supply the mass of the planet.</p><pre><code class="language-julia hljs">orb = orbit(
    a=1.0, # semi major axis (AU)
    M=1.0, # primary mass (solar masses)
    i=0.5,
    Ω=2.5,
    plx=100.0
)
sol = orbitsolve(orb, mjd(&quot;2025-01-01&quot;))
# Secondary radial velocity
radvel(sol)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">14278.801241174964</code></pre><pre><code class="language-julia hljs"># Primary radial velocity
radvel(sol, 0.1) # 0.1 solar mass secondary</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">-1298.072840106815</code></pre><p>The following show pairs of results for the secondary and the primary:</p><pre><code class="language-julia hljs">PlanetOrbits.posx(sol), PlanetOrbits.posx(sol, 0.1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(0.5888745445951494, -0.05353404950864995)</code></pre><pre><code class="language-julia hljs">radvel(sol), radvel(sol, 0.1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(14278.801241174964, -1298.072840106815)</code></pre><pre><code class="language-julia hljs">raoff(sol), raoff(sol, 0.1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(58.88745445951494, -5.353404950864995)</code></pre><pre><code class="language-julia hljs">accra(sol), accra(sol, 0.1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(-2324.7835188103113, 211.34395625548285)</code></pre><pre><code class="language-julia hljs">projectedseparation(sol), projectedseparation(sol, 0.1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(99.99788289642939, 9.090716626948126)</code></pre><pre><code class="language-julia hljs">posangle(sol), posangle(sol, 0.1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(2.511911598223864, -0.6296810553659296)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../plots/">Plotting »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 29 August 2022 21:36">Monday 29 August 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
